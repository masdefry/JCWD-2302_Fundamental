<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
    // 1. Define data: [{id, name, price, stock}]
    let products = [
        { id: 1, name: "Apel", price: 10000, stock: 10 },
        { id: 2, name: "Jeruk", price: 15000, stock: 15 },
        { id: 3, name: "Mangga", price: 20000, stock: 20 }
    ]

    // 2. Show data ---> Ditampilkan dengan prompt untuk input product
    let showData = ``

    products.forEach((value, index) => {
        showData += `${value.id} ${value.name} - Rp.${value.price.toLocaleString()} (Stock: ${value.stock}) \n`
    })

    var cart = []
    // [{id: 1, name: Apel, price: 10000, qty: 3}]
    do{
        var selectedProduct = parseInt(prompt(showData))-1 // 1

    // 3. Prompt untuk input qty
    let qty = parseInt(prompt("Input Quantity: ")) // 3

    // 4. Add to cart
    if(cart.length === 0){
        // Breakdown data products supaya stock tidak ikut ke push di array cart
        let cartToPush = {
            id: products[selectedProduct].id, // 1
            name: products[selectedProduct].name, // Apel
            price: products[selectedProduct].price, // 1000
            qty // 3
        }
        cart.push(cartToPush)
    }else{
        let getId = products[selectedProduct].id // Id dari product yang dipilih user ---> Id Apel = 1

        cart.forEach(value => {
            if(value.id === getId){
                var total = value.qty + qty 
                if(total > products[selectedProduct].stock){
                    alert("Stock Tidak Mencukupi!")
                }else{
                    value.qty += qty
                }
            }
        })
    }
    // 5. Conditional: 1. Checkout or 2. Select product again
    var menu = parseInt(prompt(`1. Checkout \n 2. Select Product Again`))
    }while(menu === 2)
</script>
</html>